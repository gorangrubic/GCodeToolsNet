<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>GCode</title>
    <meta charset="utf-8">
    <style>
        body {
            font-family: Monospace;
            margin: 0px;
            padding: 0px;
            overflow: hidden;
        }

        #info {
            margin: 0px;
            padding: 0px;
            color: #000;
            position: absolute;
            top: 40px;
            width: 90%;
            text-align: right;
            z-index: 100;
            display: block;
        }

        .hidden {
            visibility: hidden;
        }
    </style>
</head>

<body>
    <div id="info">
        <div class="units-indicator">-</div>
        <div class="frames-per-sec">32&nbsp;fps</div>
    </div>

    <div id="3dviewer">
        <!-- WebGL rendering area -->
        <div id="3dviewer-renderArea" style="height:600px;">
            <div class="youhavenowebgl hidden">You appear to not have WebGL support or WebGL has crashed. The 3D Viewer
                can't be used without WebGL.</div>
            <div class="data-details hidden">Drag and Drop Gcode Here...</div>
        </div>
    </div>

    <script src="js/three.js"></script>
    <script src="js/Tween.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/TrackballControls.js"></script>

    <!-- Custom code -->
    <script src="gcode-parser.js"></script>
    <script src="gcode-model.js"></script>
    <script src="renderer.js"></script>
    <script src="ui.js"></script>

    <script>
        var scene = null;
        var object = null;
        var camera = null;
        var controls = null;
        var element = null;

        var wantAnimate = true; // we automatically timeout rendering to save on cpu

        var grid = null; // stores grid

        var font = undefined;

        init();

        function init() {
            scene = createScene($('#3dviewer-renderArea'));

            var lastImported = localStorage.getItem('last-imported');
            var lastLoaded = localStorage.getItem('last-loaded');
            if (lastImported) {
                openGCodeFromText(lastImported);
            } else {
                console.log("loading chilipeppr logo");
                openGCodeFromPath(lastLoaded || 'https://www.chilipeppr.com/3d/chilipepprlogo.nc');
                // openGCodeFromPath('gcode/octocat.gcode');
                // openGCodeFromPath('gcode/part.gcode');
            }
        }    
    </script>

</body>

</html>